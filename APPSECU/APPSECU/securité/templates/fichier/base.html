<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Template</title>
    {% load static %}
    

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Ajoutez ceci dans la section head -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.css"/>
  
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
  </head>
  <body>
    <nav class="mnb navbar navbar-default navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button
            type="button"
            class="navbar-toggle collapsed"
            data-toggle="collapse"
            data-target="#navbar"
            aria-expanded="false"
            aria-controls="navbar"
          >
            <span class="sr-only">Toggle navigation</span>
            <i class="ic fa fa-bars"></i>
          </button>
          <div style="padding: 15px 0">
            <a href="#" id="msbo"><i class="ic fa fa-bars"></i></a>
          </div>
        </div>
 
    </nav>
    <!--msb: main sidebar-->
    <div class="msb" id="msb">
      <nav class="navbar navbar-default" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <div class="brand-wrapper">
            <!-- Brand -->
            <div class="brand-name-wrapper">
              <a class="navbar-brand" href="#"> SAITAMA </a>
            </div>
          </div>
        </div>

        <!-- Main Menu -->
        <div class="side-menu-container">
          <ul class="nav navbar-nav">
            <li>
              <a href="#"><i class="fa fa-dashboard"></i> Dashboard</a>
            </li>
            <li class="active">
              <a href="#"><i class="fa fa-puzzle-piece"></i> Components</a>
            </li>
            <li>
              <a href="#"><i class="fa fa-heart"></i> Extras</a>
            </li>

            <!-- Dropdown-->
            <li class="panel panel-default" id="dropdown">
              <a data-toggle="collapse" href="#dropdown-lvl1">
                <i class="fa fa-diamond"></i> Apps
                <span class="caret"></span>
              </a>
              <!-- Dropdown level 1 -->
              <div id="dropdown-lvl1" class="panel-collapse collapse">
                <div class="panel-body">
                  <ul class="nav navbar-nav">
                    <li><a href="#">Mail</a></li>
                    <li><a href="#">Calendar</a></li>
                    <li><a href="#">Ecommerce</a></li>
                    <li><a href="#">User</a></li>
                    <li><a href="#">Social</a></li>

                    <!-- Dropdown level 2 -->
                    <li class="panel panel-default" id="dropdown">
                      <a data-toggle="collapse" href="#dropdown-lvl2">
                        <i class="glyphicon glyphicon-off"></i> Sub Level
                        <span class="caret"></span>
                      </a>
                      <div id="dropdown-lvl2" class="panel-collapse collapse">
                        <div class="panel-body">
                          <ul class="nav navbar-nav">
                            <li><a href="#">Link</a></li>
                            <li><a href="#">Link</a></li>
                            <li><a href="#">Link</a></li>
                          </ul>
                        </div>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
            </li>
            <li>
              <a href="#"
                ><span class="glyphicon glyphicon-signal"></span> Link</a
              >
            </li>
          </ul>
        </div>
        <!-- /.navbar-collapse -->
      </nav>
    </div>
    <div class="mcw">
        <div class="cv">
          <div class="inbox">
            <div class="inbox-bx container-fluid">


      <!-- Début du tableau de bord -->
      <div class="row">
        <div class="col-md-12">
          <h1 class="page-header">Tableau de Bord Sécurité Routière</h1>
        </div>
      </div>

      <!-- Cartes statistiques -->
      <div class="row">
        <div class="col-md-3">
          <div class="stat-card bg-primary">
            <div class="pull-left">
              <i class="fa fa-car stat-icon"></i>
            </div>
            <div>
              <p class="text-muted">Total Accidents</p>
              <h3 class="stat-number">833</h3>
            </div>
          </div>
        </div>
        
        <div class="col-md-3">
          <div class="stat-card bg-danger">
            <div class="pull-left">
              <i class="fa fa-warning stat-icon"></i>
            </div>
            <div>
              <p class="text-muted">Infractions</p>
              <h3 class="stat-number">5,390</h3>
            </div>
          </div>
        </div>
        
        <div class="col-md-3">
          <div class="stat-card bg-success">
            <div class="pull-left">
              <i class="fa fa-users stat-icon"></i>
            </div>
            <div>
              <p class="text-muted">Interventions</p>
              <h3 class="stat-number">1,436</h3>
            </div>
          </div>
        </div>
        
        <div class="col-md-3">
          <div class="stat-card bg-info">
            <div class="pull-left">
              <i class="fa fa-map-marker stat-icon"></i>
            </div>
            <div>
              <p class="text-muted">Zones à Risque</p>
              <h3 class="stat-number">24</h3>
            </div>
          </div>
        </div>
      </div>
{% block graphe %}
      <!-- Graphiques -->
      <div class="row">
        <div class="col-md-6">
          <div class="chart-container">
            <h3>Évolution mensuelle</h3>
            <canvas id="evolutionChart"></canvas>
          </div>
        </div>
        
        <div class="col-md-6">
          <div class="chart-container">
            <h3>Types d'accidents</h3>
            <canvas id="accidentsChart"></canvas>
          </div>
        </div>
      </div>
      {% endblock %}
      <!-- Fin du tableau de bord -->
    </div>
  </div>
</div>
</div>
    
                
              
                
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
     <!-- Font Awesome -->
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
    <!-- Custom JS -->
    <script src="{% static 'js/style.js' %}"></script>
    <!-- Ajoutez ceci juste avant la fermeture du body, avant votre script -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>
   
{% block script %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Configuration améliorée des graphiques
        const monthlyData = {
            labels: ['Jan', 'Fév', 'Mar', 'Avr', 'Mai', 'Juin'],
            datasets: [{
                label: 'Accidents',
                data: [145, 132, 151, 125, 138, 142],
                borderColor: '#337ab7',
                backgroundColor: 'rgba(51, 122, 183, 0.1)',
                borderWidth: 2,
                pointBackgroundColor: '#337ab7',
                pointHoverRadius: 6,
                pointHoverBackgroundColor: '#337ab7',
                pointHoverBorderColor: 'white',
                pointHoverBorderWidth: 2,
                fill: true,
                tension: 0.4
            }, {
                label: 'Infractions',
                data: [890, 920, 850, 940, 880, 910],
                borderColor: '#d9534f',
                backgroundColor: 'rgba(217, 83, 79, 0.1)',
                borderWidth: 2,
                pointBackgroundColor: '#d9534f',
                pointHoverRadius: 6,
                pointHoverBackgroundColor: '#d9534f',
                pointHoverBorderColor: 'white',
                pointHoverBorderWidth: 2,
                fill: true,
                tension: 0.4
            }, {
                label: 'Interventions',
                data: [234, 245, 221, 256, 238, 242],
                borderColor: '#5cb85c',
                backgroundColor: 'rgba(92, 184, 92, 0.1)',
                borderWidth: 2,
                pointBackgroundColor: '#5cb85c',
                pointHoverRadius: 6,
                pointHoverBackgroundColor: '#5cb85c',
                pointHoverBorderColor: 'white',
                pointHoverBorderWidth: 2,
                fill: true,
                tension: 0.4
            }]
        };
    
        const accidentTypes = {
            labels: ['Collision frontale', 'Dérapage', 'Excès de vitesse', 'Non respect signalisation'],
            datasets: [{
                label: 'Nombre d\'accidents',
                data: [85, 64, 112, 93],
                backgroundColor: [
                    'rgba(51, 122, 183, 0.8)',
                    'rgba(91, 192, 222, 0.8)',
                    'rgba(92, 184, 92, 0.8)',
                    'rgba(217, 83, 79, 0.8)'
                ],
                hoverBackgroundColor: [
                    'rgba(51, 122, 183, 1)',
                    'rgba(91, 192, 222, 1)',
                    'rgba(92, 184, 92, 1)',
                    'rgba(217, 83, 79, 1)'
                ],
                borderWidth: 1,
                borderColor: 'white'
            }]
        };
    
        // Options améliorées pour le graphique d'évolution
        const evolutionChart = new Chart(document.getElementById('evolutionChart'), {
            type: 'line',
            data: monthlyData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(0,0,0,0.05)'
                        }
                    },
                    x: {
                        grid: {
                            color: 'rgba(0,0,0,0.05)'
                        }
                    }
                },
                plugins: {
                    legend: {
                        position: 'top',
                        labels: {
                            usePointStyle: true,
                            padding: 20
                        }
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                        backgroundColor: 'rgba(0,0,0,0.8)',
                        padding: 12,
                        bodySpacing: 4,
                        titleSpacing: 10,
                        cornerRadius: 4,
                        titleColor: '#fff',
                        displayColors: true,
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': ' + context.parsed.y;
                            }
                        }
                    }
                },
                interaction: {
                    mode: 'nearest',
                    axis: 'x',
                    intersect: false
                },
                hover: {
                    mode: 'nearest',
                    intersect: true
                }
            }
        });
    
        // Options améliorées pour le graphique des types d'accidents
        const accidentsChart = new Chart(document.getElementById('accidentsChart'), {
            type: 'bar',
            data: accidentTypes,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(0,0,0,0.05)'
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0,0,0,0.8)',
                        padding: 12,
                        bodySpacing: 4,
                        titleSpacing: 10,
                        cornerRadius: 4,
                        titleColor: '#fff',
                        displayColors: true
                    }
                },
                animation: {
                    duration: 2000,
                    easing: 'easeInOutQuart'
                },
                hover: {
                    animationDuration: 200
                }
            }
        });
    
        // Animation des cartes statistiques
        const statCards = document.querySelectorAll('.stat-card');
        statCards.forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-5px)';
            });
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
            });
        });
    });
    </script>

{% endblock %}
  </body>
</html>
